var e=!0,a=!e,o=90,n={startOffset:100,startOffsetVarPercent:100,amplitude:2,amplitudeVarPercent:50,frequency:2,frequencyVarPercent:100,oneOutOf:3,colorFrom:"#00ffff",colorTo:"#ff00ff",colorStop:100,colorStopVarPercent:10,colorBackground:"#ffffff",lineWidth:2},r=document.getElementById("canvas"),l=document.getElementById("param_startOffset"),c=document.getElementById("param_startOffsetVarPercent"),u=document.getElementById("param_amplitude"),f=document.getElementById("param_amplitudeVarPercent"),m=document.getElementById("param_frequency"),d=document.getElementById("param_frequencyVarPercent"),i=document.getElementById("param_oneOutOf"),g=document.getElementById("param_colorStop"),p=document.getElementById("param_colorStopVarPercent"),h=document.getElementById("param_colorFrom"),s=document.getElementById("param_colorTo"),v=document.getElementById("param_colorBackground"),y=document.getElementById("param_lineWidth"),O=document.getElementById("params"),t=document.getElementById("button_refresh"),P=document.getElementById("button_rotate"),B=document.getElementById("canvas");a&&(B=document.getElementById("button_random"));var V=r.width,M=r.height,I=r.getContext("2d");function S(e){return JSON.stringify(e).replace(/{|}|\"/gm,"").replace(/,/gm,"\n").replace(/:/gm,": ")}function E(){if(a){for(var e=0,t=O.value.trim().split("\n");e<t.length;e++){var o,r=t[e].split(":");r.length<=0||(o=r[0].trim(),r=r[1].trim(),n[o]=r)}l.value=""+n.startOffset,c.value=""+n.startOffsetVarPercent,u.value=""+n.amplitude,f.value=""+n.amplitudeVarPercent,m.value=""+n.frequency,d.value=""+n.frequencyVarPercent,i.value=""+n.oneOutOf,g.value=""+n.colorStop,p.value=""+n.colorStopVarPercent,h.value=n.colorFrom,s.value=n.colorTo,v.value=n.colorBackground,y.value=""+n.lineWidth}!function(){I.clearRect(0,0,V,M),I.fillStyle=n.colorBackground,I.fillRect(0,0,V,M);for(var e=0;e<M;e++)Math.floor(Math.random()*n.oneOutOf)%n.oneOutOf==0&&(function(e,t,o,r){var a=I.createLinearGradient(0,0,V,0);a.addColorStop(0,e),a.addColorStop(o/100,t),I.strokeStyle=a,I.lineWidth=r}(n.colorFrom,n.colorTo,Math.min(k(n.colorStop,n.colorStopVarPercent),100),n.lineWidth),function(e,t,o,r,a){I.beginPath();for(var n=0;n<e;n++){var l=function(e,t,o){return t*Math.sin(2*e*Math.PI*(o/V))}(n+t,a,r)+o;I.lineTo(n,l)}I.stroke()}(V,k(n.startOffset,n.startOffsetVarPercent),e,k(n.frequency,n.frequencyVarPercent),k(n.amplitude,n.amplitudeVarPercent)))}()}function F(){n.startOffset=parseFloat(l.value),n.startOffsetVarPercent=parseFloat(c.value),n.amplitude=parseFloat(u.value),n.amplitudeVarPercent=parseFloat(f.value),n.frequency=parseFloat(m.value),n.frequencyVarPercent=parseFloat(d.value),n.oneOutOf=parseFloat(i.value),n.colorStop=parseFloat(g.value),n.colorStopVarPercent=parseFloat(p.value),n.colorFrom=h.value,n.colorTo=s.value,n.colorBackground=v.value,n.lineWidth=parseFloat(y.value),O.value=S(n),E()}function _(){n.startOffset=Math.floor(q(0,100)),n.startOffsetVarPercent=Math.floor(q(0,100)),n.amplitude=Math.floor(q(0,20)),n.amplitudeVarPercent=Math.floor(q(0,100)),n.frequency=Math.floor(q(0,20)),n.frequencyVarPercent=Math.floor(q(0,100)),n.oneOutOf=Math.floor(q(1,20)),n.colorStop=Math.floor(q(0,100)),n.colorStopVarPercent=Math.floor(q(0,100)),n.colorFrom=T(),n.colorTo=T(),n.colorBackground=T(),n.lineWidth=Math.floor(q(2,10)),function(){var e=0,t=Math.random();.25<t&&t<.5?e=90:.5<t&&t<.75?e=180:.75<t&&(e=270);o=e,r.style.transform="rotate("+e+"deg)"}(),a&&(O.value=S(n)),E()}function q(e,t){return Math.random()*(t-e)+e}function k(e,t){t/=100;return q(e*(1-t),e*(1+t))}function T(){var e=Math.floor(255*Math.random()).toString(16);e.length<2&&(e="0"+e);var t=Math.floor(255*Math.random()).toString(16);t.length<2&&(t="0"+t);var o=Math.floor(255*Math.random()).toString(16);return"#"+e+t+(o=o.length<2?"0"+o:o)}a&&(l.onchange=F,c.onchange=F,u.onchange=F,f.onchange=F,m.onchange=F,d.onchange=F,i.onchange=F,g.onchange=F,p.onchange=F,h.onchange=F,s.onchange=F,v.onchange=F,y.onchange=F,O.value=S(n),t.onclick=E,P.onclick=function(){360<=(o+=90)&&(o=0),r.style.transform="rotate("+o+"deg)"},O.onchange=E),B.onclick=_,(e?_:E)();
